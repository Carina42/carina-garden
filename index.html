<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>小娜花园 · 首页</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="morandi-theme" data-theme="fern" data-weather="unknown">
  
  <div class="garden-frame" aria-hidden="true">
    <div id="weatherLayer" class="weather-layer"></div>
  </div>

  <div class="page-container">
    <header class="site-header">
      <div class="brand">
        <h1>小娜花园</h1> 
        <div class="tagline">生长、记录与呼吸 · <span class="tagline-accent">阿柴</span> 陪着你</div>
      </div>

      <nav class="top-nav">
        <a href="index.html" class="active">主页</a>
        <a href="focus.html">专注</a> <a href="reading.html">阅读</a>
        <a href="writing.html">写作</a>
        <a href="sleep.html" data-mobile="hide">睡眠</a>
        <a href="exercise.html" data-mobile="hide">运动</a>
        
        <button id="navMoreBtn" class="nav-more" type="button">更多 ▾</button>
        <div id="navMoreMenu" class="nav-more-menu">
          </div>
        <button id="themeBtn" class="btn btn-ghost" type="button" title="切换主题">🎨</button>
      </nav>
    </header>

    <main class="layout">
      <section class="card full-width">
        <div class="card-header">
          <h2>今日一句 · Woolf</h2>
          <button id="refreshQuote" class="btn btn-ghost">↻</button>
        </div>
        <blockquote id="woolfQuote" class="quote">Loading...</blockquote>
        <div id="woolfSource" class="quote-source"></div>
      </section>

      <section class="card">
        <div class="card-header">
          <h2>花园概况</h2>
          <span class="pill" id="weatherPill">天气获取中...</span>
        </div>
        <div class="summary-grid">
          <div>
            <div class="mini-title">今日心情</div>
            <div class="mini-value" id="homeMood">...</div>
          </div>
          <div>
            <div class="mini-title">优先待办</div>
            <div class="mini-value" id="homeTodo">...</div>
          </div>
        </div>
        <div style="margin-top:15px; border-top:1px dashed #eee; padding-top:10px;">
           <button class="btn btn-ghost" id="openSyncModal" style="width:100%">☁️ 数据同步</button>
        </div>
      </section>

      <section class="card">
        <div class="card-header">
          <h2>番茄钟</h2>
        </div>
        <div class="pomodoro-wrap">
          <button id="tomato" class="tomato" type="button">
            <div id="timer" class="timer">25:00</div>
          </button>
          <div class="mini-title" style="margin-top:10px;">今日收获</div>
          <div id="tomatoBasket" class="tomato-done"></div>
        </div>
      </section>
    </main>

    <button id="chat-button" class="chat-fab">☁️</button>
    <div id="chat-window" class="chat-window">
      <div class="chat-header" style="padding:10px; border-bottom:1px solid #eee; display:flex; justify-content:space-between;">
        <span>阿柴</span>
        <button id="chat-close" class="btn btn-ghost">✕</button>
      </div>
      <div class="chat-body" id="chatBody"></div>
      <div class="chat-input">
        <input id="chatInput" placeholder="输入关键词..." />
        <button id="chatSend" class="btn btn-primary">发送</button>
      </div>
    </div>

    <div id="themeModal" class="modal">
      <div class="modal-backdrop"></div>
      <div class="modal-panel">
        <button class="modal-close" id="closeTheme">✕</button>
        <h3>选择主题</h3>
        <div id="themeGrid" class="theme-grid" style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:15px;"></div>
        <button id="toggleNight" class="btn btn-ghost" style="margin-top:15px; width:100%;">🌙 日夜切换</button>
      </div>
    </div>

    <div id="syncModal" class="modal">
      <div class="modal-backdrop"></div>
      <div class="modal-panel">
        <button class="modal-close" id="closeSync">✕</button>
        <h3>数据同步</h3>
        <p style="font-size:0.85rem; color:#666;">将下方代码复制到另一台设备即可同步数据。</p>
        <textarea id="syncDataString" style="width:100%; height:100px; margin:10px 0; font-size:0.8rem; border:1px solid #ddd; padding:5px;"></textarea>
        <div style="display:flex; gap:10px;">
          <button id="btnCopySync" class="btn btn-primary">复制导出码</button>
          <button id="btnImportSync" class="btn btn-soft">导入同步码</button>
        </div>
      </div>
    </div>

    <footer class="site-footer" style="text-align:center; margin-top:30px; font-size:0.8rem; color:#888;">
      <div class="footer-note">小娜花园 v12.0 · 专注与记录</div>
    </footer>
  </div>
  <script src="main.js"></script>
</body>
</html>
