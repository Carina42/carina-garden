
:root{
  --bg: #f7f5f2;
  --paper: #fffefc;
  --ink: #3f3f3f;
  --muted: #6a6a6a;

  --accent: #8aa39a;
  --accent-2: #cbbfae;
  --accent-3: #a7b3c1;

  --shadow: 0 10px 30px rgba(32, 24, 18, .08);
  --radius: 18px;

  --frame: rgba(138, 163, 154, .35);
  --sparkle: rgba(138, 163, 154, .75);

  --night: 0; /* 0 day, 1 night */
}

/* Theme presets */
body[data-theme="fern"]{--accent:#8aa39a;--accent-2:#cbbfae;--accent-3:#a7b3c1;}
body[data-theme="moss"]{--accent:#7f9a90;--accent-2:#c7bfb1;--accent-3:#9fb0a5;}
body[data-theme="clay"]{--accent:#a07f73;--accent-2:#cbbfae;--accent-3:#a9b1b9;}
body[data-theme="mist"]{--accent:#8fa2b6;--accent-2:#d0c2b4;--accent-3:#a3a9be;}
body[data-theme="rose"]{--accent:#b78f92;--accent-2:#d6cbbd;--accent-3:#9aa8a1;}
body[data-theme="wheat"]{--accent:#a29b7d;--accent-2:#d6cbbd;--accent-3:#8fa2b6;}
body[data-theme="ink"]{--accent:#6f7d86;--accent-2:#cbbfae;--accent-3:#97a7b3;}
body.night{
  --night: 1;
}
body.night{
  color: rgba(240,240,240,.92);
}

*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei","Segoe UI",sans-serif;
  background:
    radial-gradient(1200px 800px at 20% 10%, rgba(138,163,154,.18), transparent 60%),
    radial-gradient(900px 700px at 80% 20%, rgba(203,191,174,.18), transparent 55%),
    radial-gradient(700px 700px at 60% 90%, rgba(167,179,193,.18), transparent 55%),
    var(--bg);
  color:var(--ink);
  overflow-x:hidden;
}
body.night{
  background:
    radial-gradient(1200px 800px at 20% 10%, rgba(90,120,115,.22), transparent 60%),
    radial-gradient(900px 700px at 80% 20%, rgba(120,105,90,.22), transparent 55%),
    radial-gradient(700px 700px at 60% 90%, rgba(85,95,110,.22), transparent 55%),
    #1a1c1e;
}
body::before{
  content:"";
  position:fixed;
  inset:-40px;
  background:
    radial-gradient(700px 500px at 10% 30%, rgba(138,163,154,.16), transparent 60%),
    radial-gradient(800px 600px at 90% 70%, rgba(203,191,174,.14), transparent 60%);
  filter:blur(20px);
  opacity:.55;
  animation:bgDrift 14s ease-in-out infinite alternate;
  pointer-events:none;
  z-index:-3;
}
body.night::before{opacity:.35;}
@keyframes bgDrift{
  from{transform:translate3d(-10px,-8px,0) scale(1.02);}
  to{transform:translate3d(10px,8px,0) scale(1.04);}
}

/* Decorative frame */
.garden-frame{position:fixed;inset:0;pointer-events:none;z-index:-1;}
.weather-layer{
  position:absolute;inset:0;
  pointer-events:none;
  overflow:hidden;
}
.raindrop{
  position:absolute;
  width:2px;height:18px;
  background:linear-gradient(180deg, rgba(180,215,225,.0), rgba(180,215,225,.85));
  border-radius:999px;
  opacity:.85;
  filter:drop-shadow(0 8px 10px rgba(0,0,0,.08));
  animation:dropFall linear infinite;
}
@keyframes dropFall{
  from{transform:translateY(-30px);}
  to{transform:translateY(calc(100vh + 60px));}
}
.sunlight{
  position:absolute; inset:-30% -30% auto auto;
  width:520px;height:520px;border-radius:999px;
  background:
    radial-gradient(circle at 40% 40%, rgba(255,240,200,.55), rgba(255,240,200,0) 60%),
    repeating-conic-gradient(from 0deg, rgba(255,240,200,.22) 0 10deg, transparent 10deg 24deg);
  mask: radial-gradient(circle at 40% 40%, #000 48%, transparent 66%);
  -webkit-mask: radial-gradient(circle at 40% 40%, #000 48%, transparent 66%);
  opacity:.9;
  animation:sunSweep 5.8s ease-in-out infinite alternate;
}
@keyframes sunSweep{
  from{transform:translate3d(10px,-10px,0) rotate(-6deg) scale(1.0); opacity:.75;}
  to{transform:translate3d(-14px,12px,0) rotate(8deg) scale(1.06); opacity:.95;}
}

.ornament{
  pointer-events:auto;
  position:absolute;
  width:120px;height:120px;border:0;background:transparent;
  opacity:.95;
  filter:drop-shadow(0 6px 18px rgba(32,24,18,.10));
}
.corner.tl{top:10px;left:10px;}
.corner.tr{top:10px;right:10px;}
.corner.bl{bottom:10px;left:10px;}
.corner.br{bottom:10px;right:10px;}
.ornament::before{
  content:"";position:absolute;inset:0;border-radius:999px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.65), transparent 55%),
    radial-gradient(circle at 70% 60%, rgba(255,255,255,.25), transparent 60%),
    radial-gradient(circle at 50% 50%, rgba(138,163,154,.28), rgba(138,163,154,.05) 55%, transparent 72%);
  mask: radial-gradient(circle at 50% 50%, #000 46%, transparent 68%);
  -webkit-mask: radial-gradient(circle at 50% 50%, #000 46%, transparent 68%);
}
.ornament::after{
  content:"";position:absolute;inset:16px;border-radius:16px;
  border:2px solid rgba(138,163,154,.35);
  transform:rotate(12deg);
  background:
    linear-gradient(135deg, rgba(138,163,154,.20), transparent 55%),
    linear-gradient(315deg, rgba(203,191,174,.20), transparent 55%);
  opacity:.9;
}
.ornament:hover{transform:translateY(-2px) rotate(-1deg);}
.ornament:active{transform:translateY(0) scale(.98);}

.wx{position:absolute;inset:22px;border-radius:999px;pointer-events:none;opacity:.95;}
body[data-weather="unknown"] .wx{
  background:
    radial-gradient(circle at 30% 60%, rgba(138,163,154,.28), transparent 55%),
    radial-gradient(circle at 65% 40%, rgba(203,191,174,.22), transparent 55%),
    linear-gradient(135deg, rgba(138,163,154,.20), transparent 55%);
  mask: radial-gradient(circle at 50% 50%, #000 55%, transparent 70%);
  -webkit-mask: radial-gradient(circle at 50% 50%, #000 55%, transparent 70%);
}
body[data-weather="sun"] .wx{
  background:
    radial-gradient(circle at 50% 50%, rgba(245,214,130,.78) 0 34%, rgba(245,214,130,0) 36%),
    repeating-conic-gradient(from 0deg, rgba(245,214,130,.65) 0 8deg, transparent 8deg 20deg);
  mask: radial-gradient(circle at 50% 50%, #000 58%, transparent 70%);
  -webkit-mask: radial-gradient(circle at 50% 50%, #000 58%, transparent 70%);
  animation:sunPulse 3.5s ease-in-out infinite;
}
@keyframes sunPulse{0%,100%{transform:scale(1);opacity:.92;}50%{transform:scale(1.06);opacity:1;}}
body[data-weather="cloud"] .wx{
  background:
    radial-gradient(circle at 34% 55%, rgba(180,190,203,.85) 0 28%, transparent 29%),
    radial-gradient(circle at 55% 48%, rgba(180,190,203,.85) 0 34%, transparent 35%),
    radial-gradient(circle at 70% 58%, rgba(180,190,203,.85) 0 26%, transparent 27%),
    linear-gradient(180deg, rgba(180,190,203,.88), rgba(180,190,203,.60));
  mask: radial-gradient(circle at 50% 55%, #000 58%, transparent 70%);
  -webkit-mask: radial-gradient(circle at 50% 55%, #000 58%, transparent 70%);
  animation:cloudDrift 4.8s ease-in-out infinite alternate;
}
@keyframes cloudDrift{from{transform:translateX(-3px);}to{transform:translateX(3px);}}
body[data-weather="rain"] .wx{
  background:
    radial-gradient(circle at 38% 50%, rgba(180,190,203,.82) 0 26%, transparent 27%),
    radial-gradient(circle at 58% 45%, rgba(180,190,203,.82) 0 30%, transparent 31%),
    radial-gradient(circle at 72% 55%, rgba(180,190,203,.82) 0 22%, transparent 23%),
    repeating-linear-gradient(120deg, rgba(120,160,180,.75) 0 2px, transparent 2px 10px);
  mask: radial-gradient(circle at 50% 55%, #000 58%, transparent 70%);
  -webkit-mask: radial-gradient(circle at 50% 55%, #000 58%, transparent 70%);
  animation:rainFall 1.1s linear infinite;
}
@keyframes rainFall{from{background-position:0 0,0 0,0 0,0 0;}to{background-position:0 0,0 0,0 0,26px 40px;}}
body[data-weather="snow"] .wx{
  background:
    radial-gradient(circle at 35% 55%, rgba(200,210,220,.90) 0 26%, transparent 27%),
    radial-gradient(circle at 58% 48%, rgba(200,210,220,.90) 0 30%, transparent 31%),
    radial-gradient(circle at 72% 58%, rgba(200,210,220,.90) 0 22%, transparent 23%),
    radial-gradient(circle at 20% 20%, rgba(255,255,255,.85) 0 2px, transparent 3px),
    radial-gradient(circle at 60% 15%, rgba(255,255,255,.85) 0 2px, transparent 3px),
    radial-gradient(circle at 80% 28%, rgba(255,255,255,.85) 0 2px, transparent 3px),
    radial-gradient(circle at 40% 75%, rgba(255,255,255,.85) 0 2px, transparent 3px),
    radial-gradient(circle at 70% 82%, rgba(255,255,255,.85) 0 2px, transparent 3px);
  mask: radial-gradient(circle at 50% 55%, #000 58%, transparent 70%);
  -webkit-mask: radial-gradient(circle at 50% 55%, #000 58%, transparent 70%);
  animation:snowFloat 2.8s ease-in-out infinite alternate;
}
@keyframes snowFloat{from{transform:translateY(-2px);}to{transform:translateY(2px);}}
body[data-weather="fog"] .wx{
  background:
    linear-gradient(180deg, rgba(190,200,210,.70), rgba(190,200,210,.18)),
    repeating-linear-gradient(0deg, rgba(255,255,255,.55) 0 2px, transparent 2px 10px);
  mask: radial-gradient(circle at 50% 55%, #000 58%, transparent 70%);
  -webkit-mask: radial-gradient(circle at 50% 55%, #000 58%, transparent 70%);
  animation:fogBreath 3.2s ease-in-out infinite;
}
@keyframes fogBreath{0%,100%{opacity:.78}50%{opacity:1}}

.page-container{
  width:min(980px, calc(100% - 24px));
  margin:24px auto 64px;
  padding:22px;
  background:rgba(255,254,252,.86);
  border:1px solid rgba(60,50,40,.10);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  position:relative;
}
body.night .page-container{background:rgba(30,32,34,.78); border-color: rgba(255,255,255,.08);}
.page-container::before{
  content:"";position:absolute;inset:10px;border-radius:calc(var(--radius) - 8px);
  border:1px dashed rgba(138,163,154,.35);pointer-events:none;
}
.page-container::after{
  content:"";position:absolute;inset:18px;border-radius:calc(var(--radius) - 14px);
  border:1px solid rgba(203,191,174,.24);pointer-events:none;
}

.site-header{
  display:flex;align-items:flex-end;justify-content:space-between;gap:14px;
  padding:10px 6px 18px;border-bottom:1px solid rgba(60,50,40,.10);
}
.brand h1{margin:0;font-size:28px;letter-spacing:.5px;}
.tagline{margin-top:6px;font-size:13px;color:var(--muted);}
body.night .tagline{color:rgba(220,220,220,.75);}
.tagline-accent{color:var(--accent);font-weight:600;}

.top-nav{
  display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end;align-items:center;position:relative;
}
.top-nav a{
  text-decoration:none;color:#4f463e;padding:7px 10px;border-radius:999px;
  background:rgba(138,163,154,.10);border:1px solid rgba(138,163,154,.18);
  transition:transform .15s ease, background .2s ease;font-size:13px;
}
body.night .top-nav a{color:rgba(245,245,245,.86);background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);}
.top-nav a:hover{transform:translateY(-1px);background:rgba(138,163,154,.18);}
.top-nav a.active{background:rgba(138,163,154,.24);border-color:rgba(138,163,154,.35);}
.theme-btn{margin-left:2px;}

.nav-more{
  display:none !important;
  border:1px solid rgba(138,163,154,.18);
  background:rgba(138,163,154,.10);
  color:#4f463e;
  padding:7px 10px;border-radius:999px;font-size:13px;cursor:pointer;
}
.nav-more-menu{
  display:none;position:absolute;right:0;top:44px;min-width:180px;
  background:rgba(255,255,255,.92);border:1px solid rgba(60,50,40,.12);
  border-radius:14px;box-shadow:0 20px 40px rgba(32,24,18,.16);
  overflow:hidden;z-index:30;
}
body.night .nav-more-menu{background:rgba(30,32,34,.92);border-color:rgba(255,255,255,.10);}
.nav-more-menu a{display:block;padding:10px 12px;border-radius:0;background:transparent;border:0;}
.nav-more-menu a:hover{background:rgba(138,163,154,.10);transform:none;}

/* Modal */
.modal{display:none;position:fixed;inset:0;z-index:60;}
.modal[aria-hidden="false"]{display:block;}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.28);backdrop-filter: blur(2px);}
.modal-panel{
  position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
  width:min(680px, calc(100% - 28px));
  border-radius:18px;
  background:rgba(255,255,255,.95);
  border:1px solid rgba(60,50,40,.12);
  box-shadow:0 26px 60px rgba(32,24,18,.22);
  overflow:hidden;
}
body.night .modal-panel{background:rgba(30,32,34,.96);border-color:rgba(255,255,255,.10);}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid rgba(60,50,40,.10);}
.modal-title{font-weight:800;}
.modal-actions{display:flex;gap:8px;align-items:center;}
.theme-grid{
  display:grid;grid-template-columns:repeat(4,1fr);
  gap:10px;padding:14px;
}
.theme-card{
  border-radius:16px;padding:10px;
  border:1px solid rgba(60,50,40,.10);
  background:rgba(255,255,255,.75);
  cursor:pointer;
  transition:transform .15s ease, background .2s ease;
}
body.night .theme-card{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);}
.theme-card:hover{transform:translateY(-2px);}
.theme-name{font-size:12px;color:var(--muted);margin-top:8px;}
body.night .theme-name{color:rgba(220,220,220,.75);}
.swatches{display:flex;gap:6px;}
.sw{width:22px;height:22px;border-radius:8px;border:1px solid rgba(60,50,40,.10);}
.modal-foot{padding:0 14px 14px;color:var(--muted);font-size:12px;}

.layout{display:grid;gap:14px;padding:18px 6px 8px;}

.card{
  background:rgba(255,255,255,.72);
  border:1px solid rgba(60,50,40,.08);
  border-radius:16px;padding:14px;
  box-shadow:0 10px 24px rgba(32,24,18,.06);
  position:relative;overflow:hidden;
}
body.night .card{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);box-shadow:none;}
.card::before{
  content:"";position:absolute;inset:-40px -40px auto auto;width:180px;height:180px;
  background:radial-gradient(circle, rgba(138,163,154,.18), transparent 60%);
  transform:rotate(18deg);pointer-events:none;
  opacity:.9;
}
body.night .card::before{opacity:.4;}
.card-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px;}
.card h2{margin:0;font-size:16px;}
.hint{font-size:12px;color:var(--muted);}
body.night .hint{color:rgba(220,220,220,.75);}

.pill{
  font-size:12px;padding:6px 10px;border-radius:999px;
  border:1px solid rgba(138,163,154,.22);
  background:rgba(138,163,154,.10);color:#3d3b38;
}
body.night .pill{color:rgba(245,245,245,.86);background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);}

.quote{
  margin:0;font-size:16px;line-height:1.75;padding:10px 12px;
  background:rgba(138,163,154,.08);
  border:1px solid rgba(138,163,154,.16);
  border-radius:12px;
}
body.night .quote{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);}

.summary-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
.mini{padding:10px;border-radius:14px;border:1px solid rgba(60,50,40,.08);background:rgba(255,255,255,.70);}
body.night .mini{background:rgba(255,255,255,.05);border-color:rgba(255,255,255,.10);}
.mini-title{font-size:12px;color:var(--muted);margin-bottom:6px;}
body.night .mini-title{color:rgba(220,220,220,.75);}
.mini-value{font-size:13px;line-height:1.5;}

.progress-wrap{margin-top:12px;}
.progress-label{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-bottom:6px;}
body.night .progress-label{color:rgba(220,220,220,.75);}
.progress{height:12px;border-radius:999px;background:rgba(60,50,40,.08);overflow:hidden;border:1px solid rgba(60,50,40,.08);}
body.night .progress{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);}
.progress-bar{
  height:100%;width:0%;
  background:linear-gradient(90deg, var(--accent), var(--accent-2));
  border-radius:999px;transition:width .6s ease;
}

.form-row{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}
.field span{display:block;font-size:12px;color:var(--muted);margin-bottom:6px;}
body.night .field span{color:rgba(220,220,220,.75);}
.input{
  width:100%;padding:10px 12px;border-radius:12px;
  border:1px solid rgba(60,50,40,.12);
  background:rgba(255,255,255,.85);
  outline:none;transition:border .2s ease, transform .12s ease;
  color:inherit;
}
body.night .input{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);}
.input:focus{border-color:rgba(138,163,154,.55);transform:translateY(-1px);}

.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;}
.btn{
  border:1px solid rgba(60,50,40,.10);border-radius:999px;
  padding:9px 12px;font-size:13px;cursor:pointer;
  background:rgba(255,255,255,.75);
  transition:transform .15s ease, background .2s ease, border .2s ease;
  color:#3d3b38;
}
body.night .btn{color:rgba(245,245,245,.86);background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);}
.btn:hover{transform:translateY(-1px);background:rgba(255,255,255,.92);}
body.night .btn:hover{background:rgba(255,255,255,.10);}
.btn:active{transform:translateY(0) scale(.99);}
.btn-primary{background:rgba(138,163,154,.26);border-color:rgba(138,163,154,.28);}
.btn-primary:hover{background:rgba(138,163,154,.34);}
.btn-soft{background:rgba(203,191,174,.18);border-color:rgba(203,191,174,.30);}
.btn-soft:hover{background:rgba(203,191,174,.26);}
.btn-ghost{background:transparent;border-color:rgba(60,50,40,.12);}
.btn-ghost:hover{background:rgba(60,50,40,.06);}
body.night .btn-ghost{border-color:rgba(255,255,255,.12);}

.pomodoro-wrap{display:flex;align-items:center;gap:16px;flex-wrap:wrap;}
.tomato{
  width:140px;height:140px;border-radius:999px;
  border:2px solid rgba(203,191,174,.35);
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.75), transparent 40%),
    radial-gradient(circle at 50% 70%, rgba(203,191,174,.35), transparent 62%),
    radial-gradient(circle at 50% 50%, rgba(235,170,160,.65), rgba(235,170,160,.15) 55%, rgba(255,255,255,.82) 72%);
  box-shadow:0 16px 32px rgba(32,24,18,.10);
  position:relative;display:flex;align-items:center;justify-content:center;flex-direction:column;
  cursor:pointer;
}
body.night .tomato{box-shadow:none;border-color:rgba(255,255,255,.10);}
.tomato-face{
  position:absolute;top:18px;left:50%;width:28px;height:18px;transform:translateX(-50%);
  border-radius:999px;
  background:
    radial-gradient(circle at 30% 40%, rgba(138,163,154,.80), transparent 55%),
    radial-gradient(circle at 70% 40%, rgba(138,163,154,.80), transparent 55%);
  opacity:.45;
}
.timer{font-weight:700;letter-spacing:.6px;font-size:24px;color:inherit;}
.tomato-done{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px;max-width:320px;}
.tomato-done .done{
  width:16px;height:16px;border-radius:999px;
  background:rgba(235,170,160,.55);border:1px solid rgba(235,170,160,.60);
}

/* Chat */
.chat-fab{
  position:fixed;right:18px;bottom:18px;width:52px;height:52px;border-radius:999px;
  border:1px solid rgba(138,163,154,.35);background:rgba(255,255,255,.80);
  box-shadow:0 16px 30px rgba(32,24,18,.12);
  cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center;z-index:10;
}
body.night .chat-fab{background:rgba(30,32,34,.80);border-color:rgba(255,255,255,.10);box-shadow:none;}
.chat-window{
  position:fixed;right:18px;bottom:80px;width:min(360px, calc(100% - 36px));height:440px;
  border-radius:18px;background:rgba(255,255,255,.92);
  border:1px solid rgba(60,50,40,.12);
  box-shadow:0 22px 44px rgba(32,24,18,.18);
  display:none;overflow:hidden;z-index:10;
}
body.night .chat-window{background:rgba(30,32,34,.92);border-color:rgba(255,255,255,.10);box-shadow:none;}
.chat-header{
  display:flex;align-items:center;justify-content:space-between;padding:10px 12px;
  border-bottom:1px solid rgba(60,50,40,.10);background:rgba(138,163,154,.10);
}
body.night .chat-header{border-color:rgba(255,255,255,.10);background:rgba(255,255,255,.06);}
.chat-title{font-weight:700;}
.chat-body{padding:12px;height:calc(100% - 110px);overflow:auto;}
.chat-bubble{
  max-width:92%;padding:10px 12px;border-radius:14px;border:1px solid rgba(60,50,40,.10);
  background:rgba(255,255,255,.80);line-height:1.6;margin-bottom:10px;
}
body.night .chat-bubble{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);}
.chat-bubble.bot{background:rgba(138,163,154,.12);border-color:rgba(138,163,154,.18);}
.chat-bubble.me{margin-left:auto;background:rgba(203,191,174,.14);border-color:rgba(203,191,174,.22);}
.chat-input{display:flex;gap:8px;padding:10px 12px;border-top:1px solid rgba(60,50,40,.10);}
body.night .chat-input{border-color:rgba(255,255,255,.10);}

/* Reading */
.shelf-controls{display:grid;gap:10px;}
.count-line{display:flex;align-items:baseline;justify-content:space-between;gap:10px;}
.count-title{font-size:12px;color:var(--muted);}
.count-number{font-size:22px;font-weight:800;}
.flower-strip{
  height:34px;border-radius:999px;border:1px dashed rgba(138,163,154,.32);
  background:rgba(138,163,154,.08);
  overflow:hidden;position:relative;
}
.flower-display{
  position:absolute;inset:0;
  background-image:
    radial-gradient(circle at 20% 55%, rgba(235,170,160,.40), transparent 35%),
    radial-gradient(circle at 40% 40%, rgba(203,191,174,.45), transparent 35%),
    radial-gradient(circle at 60% 60%, rgba(138,163,154,.40), transparent 35%),
    radial-gradient(circle at 80% 45%, rgba(167,179,193,.45), transparent 35%);
  opacity:.75;
  animation:flowerFlow 5s ease-in-out infinite alternate;
}
@keyframes flowerFlow{from{transform:translateX(-8px);}to{transform:translateX(8px);}}

.upload-form{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.upload-form .field:last-of-type{grid-column:1/-1;}
.upload-form button{grid-column:1/-1;justify-self:start;}

.bookshelf{display:grid;gap:12px;}
.shelf-row{
  display:grid;grid-template-columns:repeat(10,1fr);gap:8px;
  padding:12px 10px;border-radius:16px;background:rgba(255,255,255,.60);
  border:1px solid rgba(60,50,40,.08);
  position:relative;overflow:hidden;
}
body.night .shelf-row{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.10);}
.shelf-row::after{
  content:"";position:absolute;left:0;right:0;bottom:0;height:7px;
  background:linear-gradient(90deg, rgba(203,191,174,.50), rgba(138,163,154,.45));
  opacity:.5;
}
.book{
  height:96px;border-radius:10px;border:1px solid rgba(60,50,40,.12);
  background:linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.95));
  position:relative;overflow:hidden;cursor:pointer;
  transition:transform .15s ease, box-shadow .2s ease;
  animation:popIn .25s ease both;
}
body.night .book{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.10);box-shadow:none;}
@keyframes popIn{from{transform:translateY(6px) scale(.98);opacity:0;}to{transform:translateY(0) scale(1);opacity:1;}}
.book:hover{transform:translateY(-2px);box-shadow:0 12px 18px rgba(32,24,18,.10);}
body.night .book:hover{box-shadow:none;}
.book .spine{
  position:absolute;inset:0;padding:10px 8px;display:flex;flex-direction:column;justify-content:space-between;
  background:linear-gradient(180deg, rgba(138,163,154,.22), rgba(203,191,174,.18));
}
.book .title{font-size:11px;line-height:1.2;font-weight:700;color:#2f2d2b;text-shadow:0 1px 0 rgba(255,255,255,.55);}
body.night .book .title{color:rgba(245,245,245,.86);text-shadow:none;}
.book .mark{font-size:11px;color:rgba(47,45,43,.70);}
body.night .book .mark{color:rgba(220,220,220,.70);}
.book.cover{background-size:cover;background-position:center;}
.book.cover::before{
  content:"";position:absolute;inset:0;
  background:linear-gradient(90deg, rgba(0,0,0,.14), transparent 35%, rgba(255,255,255,.08));
  mix-blend-mode:multiply;opacity:.85;
}
.book.cover::after{
  content:"";position:absolute;inset:0;border-radius:10px;border:1px solid rgba(255,255,255,.30);pointer-events:none;
}

/* Table */
.table-wrap{overflow:auto;}
.table{
  width:100%;border-collapse:separate;border-spacing:0;overflow:hidden;
  border-radius:14px;border:1px solid rgba(60,50,40,.10);
  background:rgba(255,255,255,.80);
}
body.night .table{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.10);}
.table th,.table td{padding:10px;border-bottom:1px solid rgba(60,50,40,.08);font-size:13px;vertical-align:middle;}
body.night .table th, body.night .table td{border-color:rgba(255,255,255,.08);}
.table th{position:sticky;top:0;background:rgba(138,163,154,.10);text-align:left;}
body.night .table th{background:rgba(255,255,255,.06);}
.cover-thumb{width:44px;height:62px;border-radius:8px;border:1px solid rgba(60,50,40,.12);background:rgba(255,255,255,.90);object-fit:cover;}

.site-footer{padding:14px 6px 6px;display:flex;justify-content:space-between;color:var(--muted);font-size:12px;}
body.night .site-footer{color:rgba(220,220,220,.72);}
.footer-back{color:var(--accent);text-decoration:none;}
.footer-back:hover{text-decoration:underline;}

/* Petals */
.petal{
  position:fixed;width:10px;height:10px;border-radius:10px 2px 10px 2px;
  background:var(--sparkle);
  transform:translate(-50%,-50%) rotate(0deg);
  pointer-events:none;z-index:999;opacity:.85;
  animation:petalFly .9s ease forwards;
}
@keyframes petalFly{
  0%{transform:translate(var(--x0), var(--y0)) rotate(0deg) scale(1);opacity:.9;}
  100%{transform:translate(var(--x1), var(--y1)) rotate(220deg) scale(.6);opacity:0;}
}

/* Mobile */
@media (max-width: 640px){
  .page-container{padding:16px;margin-top:14px;}
  .site-header{flex-direction:column;align-items:flex-start;}
  .summary-grid{grid-template-columns:1fr;}
  .form-row{grid-template-columns:1fr;}
  .upload-form{grid-template-columns:1fr;}
  .tomato{width:128px;height:128px;}
  .ornament{width:92px;height:92px;opacity:.9;}
  .corner.tl{top:8px;left:8px;}
  .corner.tr{top:8px;right:8px;}
  .corner.bl{bottom:8px;left:8px;}
  .corner.br{bottom:8px;right:8px;}

  /* mobile nav: show only data-mobile=show, move others into '更多' */
  .top-nav a[data-mobile="hide"]{display:none;}
  .nav-more{display:inline-flex !important;align-items:center;gap:6px;}
  .theme-grid{grid-template-columns:repeat(2,1fr);}
}
